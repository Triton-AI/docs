"use strict";(self.webpackChunkappcircle_docusaurus=self.webpackChunkappcircle_docusaurus||[]).push([[800],{2862:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>h,default:()=>m,frontMatter:()=>d,metadata:()=>n,toc:()=>p});const n=JSON.parse('{"id":"projects/misc/ttls","title":"Target Trajectory Lines (TTLS)","description":"Target Trajectory Lines (TTLS)","source":"@site/docs/projects/misc/ttls.md","sourceDirName":"projects/misc","slug":"/projects/misc/ttls","permalink":"/docs/projects/misc/ttls","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Target Trajectory Lines (TTLS)","hide_title":true,"sidebar_pos":1},"sidebar":"mySidebar","previous":{"title":"Gokart Controller Documentation","permalink":"/docs/projects/gokart/rtc/firmware"},"next":{"title":"Competition and Travel","permalink":"/docs/misc/travel"}}');var o=r(4848),a=r(8453);const s="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAwCAIAAADo7H/xAAACgUlEQVRYhe2WUU/aUBiGv9O1EK1iudmW2ExnRwtGCm6JbPpjlu1WDc4tIXovhrHoiGy72lx2P9Dtd6iZIHBOl7hfgCZALdFydkFiCFpGzTYu6HvXfG/O0+877zktujc2Dr0T00O2g3fwDt7BO3gH///EWhU8Hs/8wrzilwGAYPJ2M6Xr+l/HI6vvfWw1FlJVSimllGGYH4eHiXii1TA4OLi4tBjw+ymlBGvprXSlUrGLtxy+IssAsJvdXY8nGo2GIitthuhSNKSqLMtyHBdUpxYWF+yyO+Gbun33jk9+cG1JVnwAkM3srMcTptnwyb4b4C33HhMSUtXZ2SfNx0bDVPwyLpE2myiOAgDDIAB6A/ytEUG4tnCwdzB2f1wYES4uTMMweJ4Ph8MYk3K5DACSJM3NzXEuThTFyckAQsgwjFzu6PT01BbeMnqtkiTp5atlwSvUajUAQIAoUJ7ndV1HCFFKEUIDAwPlcvlNcuPX8XH3eMvuW3VycqJpP2ciMzzPcxzHsqzb7dZ1Pfk6+enj9rfd7xrRph9NC4Iw/TBcKJS6n0FX3Tf1+cu2y+XayewcFYorq7Hz8/NnT59fVgOBQHQ56hkerlarLMsCIIxLqc2UYdQ7rGnj1qOUgvVZKBaLqY3U2dnZ0NCQ2+3mOC4UCkVfRDuvaZn8qyJYC6pTl2eBYO3qGyDEAEDma7ZUwiurMUVpvy3aZKP79FY6n8vXDcMw6vlcPr2VtnKK4qjf/wdwUza6r1Qq8bX1zh5CiKoGI48jEQAAwBh39neV/O61v7c/IU14vV7TNAtHxffvPtTrnaJnI/n/Qv39u+HgHbyDd/AOvn/wbK1a7SG+v4ffY/xvqn7ll7BjNUwAAAAASUVORK5CYII=",i=r.p+"assets/images/outer_ttls-93d891b9f5ac61b54415bf7ff06175e6.png",l=r.p+"assets/images/inner_ttls-83528d1a2d10cf9a9c3d94c963a185b5.png";var c=r(4529);const d={title:"Target Trajectory Lines (TTLS)",hide_title:!0,sidebar_pos:1},h=void 0,u={},p=[{value:"Target Trajectory Lines (TTLS)",id:"target-trajectory-lines-ttls",level:2},{value:"Generating KMLs",id:"generating-kmls",level:2},{value:"Outer",id:"outer",level:3},{value:"Inner",id:"inner",level:3},{value:"KML to CSV",id:"kml-to-csv",level:3},{value:"Generating TTLs",id:"generating-ttls",level:2}];function g(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"target-trajectory-lines-ttls",children:"Target Trajectory Lines (TTLS)"}),"\n",(0,o.jsx)(t.p,{children:"A target trajectory line refers to teh ideal path that a vehicle should follow to reach its destination safely and efficiently. It's typically generated from a series of GPS waypoints or predefined goals and is the primary input for the vehicle's control system, assuming a simple waypoint follower."}),"\n",(0,o.jsx)(t.p,{children:"GPS waypoints provide the basic framework, and is then interpolated int o a smooth, continuous curve, often using splines or polynomials to form the target trajectory line. Controllers like Pure Pursit, Stanley, or Model Predictive Control uses the current position of the vehicle and calculate the necessary control commands to minimize the deviation between the actual path and the target trajectory."}),"\n",(0,o.jsx)(t.h2,{id:"generating-kmls",children:"Generating KMLs"}),"\n",(0,o.jsxs)(t.p,{children:["To generate TTLS, you can first generate the predefined path using ",(0,o.jsx)(t.a,{href:"https://earth.google.com/web/",children:"Google Earth"}),'. These are saved as KML format. You need to head over to where you want the path on Earth. For reference, we\'ll use the JSOE EBU1 building for demo. To create a polygonal shape, press on the "Add path or polygon" icon.']}),"\n",(0,o.jsx)("img",{src:s}),"\n",(0,o.jsx)(t.admonition,{type:"info",children:(0,o.jsx)(t.p,{children:"Please have each boundary in separate Google Earth Projects"})}),"\n",(0,o.jsx)(t.h3,{id:"outer",children:"Outer"}),"\n",(0,o.jsx)(t.p,{children:"TTLs need an outer boundary that specifies the walls of the path. As such, we need to create a polygonal enclosing enclosing the race track. Below, you'll see an outer boundary for the EBU1 building."}),"\n",(0,o.jsx)(c.A,{src:i,alt:"Outer TTLs",description:"The Outer TTL boundary for JSOE EBU1"}),"\n",(0,o.jsx)(t.h3,{id:"inner",children:"Inner"}),"\n",(0,o.jsx)(t.p,{children:"You now need an inner boundary for the race track. Follow the exact same steps to get the below:"}),"\n",(0,o.jsx)(c.A,{src:l,alt:"Inner TTLs",description:"The Inner TTL boundary for JSOE EBU1s"}),"\n",(0,o.jsx)(t.p,{children:"Export both the outer and inner as KML formats."}),"\n",(0,o.jsx)(t.h3,{id:"kml-to-csv",children:"KML to CSV"}),"\n",(0,o.jsxs)(t.p,{children:["Our TTL generator requires a CSV format, and Google Earth exports in KML. Assuming you have race_common on your computer, go into ",(0,o.jsx)(t.code,{children:"race_common/tools/kml_extractor"})," and run:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"python3 kml_extractor_polygon.py <KML_FILE>\n"})}),"\n",(0,o.jsx)(t.h2,{id:"generating-ttls",children:"Generating TTLs"}),"\n",(0,o.jsxs)(t.p,{children:["To generate TTLS, you need to clone this ",(0,o.jsx)(t.a,{href:"https://github.com/airacingtech/offline-trajectory-tools",children:"repository"}),"."]})]})}function m(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(g,{...e})}):g(e)}},4529:(e,t,r)=>{r.d(t,{A:()=>o});r(6540);var n=r(4848);function o(e){let{src:t,alt:r,description:o}=e;return(0,n.jsxs)("div",{style:{width:"100%",maxWidth:"100%",margin:"2rem auto",borderRadius:"12px",overflow:"hidden",backgroundColor:"var(--ifm-card-background-color)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[(0,n.jsx)("img",{src:t,alt:r,style:{width:"100%",height:"auto",display:"block",objectFit:"contain"}}),(0,n.jsx)("div",{style:{padding:"1rem",fontSize:"0.95rem",color:"var(--ifm-font-color-base)"},children:o})]})}},8453:(e,t,r)=>{r.d(t,{R:()=>s,x:()=>i});var n=r(6540);const o={},a=n.createContext(o);function s(e){const t=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);